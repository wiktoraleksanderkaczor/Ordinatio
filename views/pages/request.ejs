<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="stylesheet" type="text/css" href="styles/style.css"/>
		<title>Ordinatio</title>
	</head>
	<body>
		<div>
			<h1>Ordinatio Rota Request Page</h1>
            <form id="requestForm" method="POST" action="/request">
                <!-- Start and end dates for rota or holiday -->
                <label for="startDate">Start date:</label>
                <input type="date" name="startDate" required>
				<label for="startTime">Start Time:</label>
				<input type="time" name="startTime">
                <label for="endDate">End date:</label>
                <input type="date" name="endDate" required>
				<label for="endTime">End Time:</label>
				<input type="time" name="endTime">

                <br>

                <!-- Rota or holiday choice -->
                <label for="type">Rota or Shift Request:</label>
				<select name="type" required>
					<option value="holiday">Holiday</option>
					<option value="shift" selected>Shift</option>
                </select>
                
				<input type="submit" value="Request">
            </form>
            
			<form id="linksForm" method="GET" action="/main">
				<input type="submit" value="Go back" formaction="/main" form="linksForm">
            </form>

            <h3>Current requests:</h3>
            <div class="col-lg-12" id="request-list">
                <!-- Insert my list here -->                              
            </div>
            <script>
                // Fetch JSON data from server
                fetch('./rota_requests')
                .then(response => {
                    return response.json();
                })
                .then(data => {
                    console.log(data);
                    // Use the data to add requests to a HTML list.
                    var listDiv = document.getElementById('request-list');
                    var ul=document.createElement('ul');
                    for (var i = 0; i < data.length; ++i) {
                        var li=document.createElement('li');
                        // Use innerHTML to set the text.
                        li.innerHTML = data[i].start + " - " + data[i].end;   
                        ul.appendChild(li);                                 
                    }
                    listDiv.appendChild(ul);
                })
                .catch(err => {
                    console.log("Error with fetching Gantt chart data.");
                });



            </script>
            <h1><%= info %></h1>
		</div>
	</body>
</html>